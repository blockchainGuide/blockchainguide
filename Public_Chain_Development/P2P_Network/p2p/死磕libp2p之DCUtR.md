中继是用作代理以遍历NAT的，但是这种方法扩展和维护成本高，可能会导致低带宽、高延迟的连接。打洞是另一种技术，它使在NAT后面的两个节点能够直接通信。然而，除了中继节点之外，它还需要另一种基础设施，称为信令服务器。

信令服务器是指用于在P2P网络中促进节点之间通信的服务器或服务，具体而言是用于建立、维护和终止两个在NAT后面的节点之间的直接通信通道的。它有助于发现节点的外部IP地址和端口，并通过在节点之间中继消息来遍历NAT。

好消息是，libp2p提供了一个打洞解决方案，消除了集中式的信令服务器的需求，并允许使用分布式中继节点。

## 什么是通过中继进行直接连接升级

libp2p DCUtR（通过中继进行直接连接升级）是一种协议，用于通过打洞建立节点之间的直接连接，无需信令服务器。DCUtR涉及到同步和打开连接到每个节点的预测外部地址。

DCUtR协议使用协议ID /libp2p/dcutr，并涉及连接和同步消息的交换。

DCUtR协议支持不同类型的连接，如TCP和QUIC，建立连接的过程对于每种类型都是不同的。